<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Certificate Test - Friendship Quiz</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background: #f0f0f0;
        }
        .test-container {
            max-width: 600px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }
        button {
            background: #28a745;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            margin: 5px;
        }
        button:hover {
            background: #218838;
        }
        canvas {
            border: 2px solid #ddd;
            border-radius: 10px;
            max-width: 100%;
            margin-top: 20px;
        }
        select {
            padding: 8px;
            border-radius: 5px;
            border: 1px solid #ddd;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>üéâ Certificate Generator Test</h1>
        <p>This is a test page to verify the certificate generation functionality works correctly.</p>
        
        <div>
            <label>Certificate Style:</label>
            <select id="styleSelect" onchange="generateTestCertificate()">
                <option value="elegant">Elegant Gold</option>
                <option value="modern">Modern Gradient</option>
                <option value="classic">Classic Blue</option>
                <option value="friendship">Friendship Pink</option>
                <option value="celebration">Celebration Purple</option>
            </select>
        </div>
        
        <button onclick="generateTestCertificate()">Generate Test Certificate</button>
        <button onclick="downloadTestCertificate()">Download Certificate</button>
        
        <canvas id="testCanvas" width="800" height="600"></canvas>
    </div>

    <script>
        // Test data
        const testData = {
            percentage: 95,
            friendName: "Alice Johnson",
            creatorName: "Bob Smith", 
            quizTitle: "How Well Do You Know Bob?",
            date: new Date().toLocaleDateString('en-US', { 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric' 
            })
        };

        function getFriendshipLevel(percentage) {
            if (percentage >= 90) return 'Best Friends Forever! üíï';
            if (percentage >= 75) return 'Great Friends! üë´';
            if (percentage >= 60) return 'Good Friends! üòä';
            if (percentage >= 40) return 'Getting to Know Each Other ü§ù';
            return 'Time to Catch Up! üí¨';
        }

        function generateTestCertificate() {
            const canvas = document.getElementById('testCanvas');
            const ctx = canvas.getContext('2d');
            const style = document.getElementById('styleSelect').value;
            
            canvas.width = 800;
            canvas.height = 600;
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            drawCertificate(ctx, canvas.width, canvas.height, style);
        }

        function drawCertificate(ctx, width, height, style) {
            const data = testData;
            
            const styles = {
                elegant: {
                    background: 'linear-gradient(135deg, #f6d365 0%, #fda085 100%)',
                    border: '#d4af37',
                    primaryText: '#2c3e50',
                    secondaryText: '#34495e',
                    accent: '#d4af37'
                },
                modern: {
                    background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',
                    border: '#5a6fd8',
                    primaryText: '#ffffff',
                    secondaryText: '#f8f9fa',
                    accent: '#ffffff'
                },
                classic: {
                    background: 'linear-gradient(135deg, #2980b9 0%, #3498db 100%)',
                    border: '#2471a3',
                    primaryText: '#ffffff',
                    secondaryText: '#ecf0f1',
                    accent: '#f39c12'
                },
                friendship: {
                    background: 'linear-gradient(135deg, #ff9a9e 0%, #fecfef 50%, #fecfef 100%)',
                    border: '#e91e63',
                    primaryText: '#2c3e50',
                    secondaryText: '#34495e',
                    accent: '#e91e63'
                },
                celebration: {
                    background: 'linear-gradient(135deg, #a18cd1 0%, #fbc2eb 100%)',
                    border: '#8e44ad',
                    primaryText: '#2c3e50',
                    secondaryText: '#34495e',
                    accent: '#8e44ad'
                }
            };
            
            const currentStyle = styles[style];
            
            // Create gradient background
            const gradient = ctx.createLinearGradient(0, 0, width, height);
            if (style === 'elegant') {
                gradient.addColorStop(0, '#f6d365');
                gradient.addColorStop(1, '#fda085');
            } else if (style === 'modern') {
                gradient.addColorStop(0, '#667eea');
                gradient.addColorStop(1, '#764ba2');
            } else if (style === 'classic') {
                gradient.addColorStop(0, '#2980b9');
                gradient.addColorStop(1, '#3498db');
            } else if (style === 'friendship') {
                gradient.addColorStop(0, '#ff9a9e');
                gradient.addColorStop(0.5, '#fecfef');
                gradient.addColorStop(1, '#fecfef');
            } else if (style === 'celebration') {
                gradient.addColorStop(0, '#a18cd1');
                gradient.addColorStop(1, '#fbc2eb');
            }
            
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, width, height);
            
            // Draw decorative border
            ctx.strokeStyle = currentStyle.border;
            ctx.lineWidth = 8;
            ctx.strokeRect(20, 20, width - 40, height - 40);
            
            // Inner decorative border
            ctx.strokeStyle = currentStyle.accent;
            ctx.lineWidth = 2;
            ctx.strokeRect(40, 40, width - 80, height - 80);
            
            // Draw decorative corners
            drawDecorativeCorners(ctx, currentStyle.accent);
            
            // Certificate title
            ctx.fillStyle = currentStyle.primaryText;
            ctx.font = 'bold 36px Arial, sans-serif';
            ctx.textAlign = 'center';
            ctx.fillText('üéâ FRIENDSHIP CERTIFICATE üéâ', width / 2, 120);
            
            // Subtitle
            ctx.font = 'italic 18px Arial, sans-serif';
            ctx.fillStyle = currentStyle.secondaryText;
            ctx.fillText('This certifies that', width / 2, 160);
            
            // Friend's name (large)
            ctx.font = 'bold 42px Arial, sans-serif';
            ctx.fillStyle = currentStyle.accent;
            ctx.fillText(data.friendName.toUpperCase(), width / 2, 220);
            
            // And text
            ctx.font = 'italic 20px Arial, sans-serif';
            ctx.fillStyle = currentStyle.secondaryText;
            ctx.fillText('and', width / 2, 260);
            
            // Creator's name
            ctx.font = 'bold 36px Arial, sans-serif';
            ctx.fillStyle = currentStyle.accent;
            ctx.fillText(data.creatorName.toUpperCase(), width / 2, 310);
            
            // Achievement text
            ctx.font = 'italic 18px Arial, sans-serif';
            ctx.fillStyle = currentStyle.secondaryText;
            ctx.fillText('are officially certified as', width / 2, 350);
            
            // Friendship level
            const friendshipLevel = getFriendshipLevel(data.percentage);
            ctx.font = 'bold 28px Arial, sans-serif';
            ctx.fillStyle = currentStyle.primaryText;
            ctx.fillText(friendshipLevel, width / 2, 390);
            
            // Score
            ctx.font = 'bold 48px Arial, sans-serif';
            ctx.fillStyle = currentStyle.accent;
            ctx.fillText(`${data.percentage}% FRIENDSHIP SCORE`, width / 2, 450);
            
            // Quiz reference
            ctx.font = 'italic 14px Arial, sans-serif';
            ctx.fillStyle = currentStyle.secondaryText;
            const quizText = `Based on "${data.quizTitle}"`;
            ctx.fillText(quizText, width / 2, 490);
            
            // Date and signature area
            ctx.font = '16px Arial, sans-serif';
            ctx.textAlign = 'left';
            ctx.fillText(`Date: ${data.date}`, 60, 540);
            
            ctx.textAlign = 'right';
            ctx.fillText('FriendshipQuiz.com', width - 60, 540);
            
            // Add friendship emojis
            ctx.font = '24px Arial';
            ctx.textAlign = 'center';
            ctx.fillText('üíï üë´ üéä ‚ú® üíñ', width / 2, 520);
        }

        function drawDecorativeCorners(ctx, color) {
            ctx.strokeStyle = color;
            ctx.lineWidth = 3;
            
            // Top-left corner
            ctx.beginPath();
            ctx.moveTo(60, 80);
            ctx.lineTo(60, 60);
            ctx.lineTo(80, 60);
            ctx.stroke();
            
            // Top-right corner
            ctx.beginPath();
            ctx.moveTo(720, 80);
            ctx.lineTo(720, 60);
            ctx.lineTo(740, 60);
            ctx.stroke();
            
            // Bottom-left corner
            ctx.beginPath();
            ctx.moveTo(60, 520);
            ctx.lineTo(60, 540);
            ctx.lineTo(80, 540);
            ctx.stroke();
            
            // Bottom-right corner
            ctx.beginPath();
            ctx.moveTo(720, 520);
            ctx.lineTo(720, 540);
            ctx.lineTo(740, 540);
            ctx.stroke();
        }

        function downloadTestCertificate() {
            const canvas = document.getElementById('testCanvas');
            const link = document.createElement('a');
            link.download = `test-friendship-certificate.png`;
            link.href = canvas.toDataURL('image/png');
            link.click();
            alert('Test certificate downloaded!');
        }

        // Generate initial certificate
        window.onload = function() {
            generateTestCertificate();
        };
    </script>
</body>
</html>
